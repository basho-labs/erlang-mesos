language: erlang
otp_release:
    - 17.5
    - 18.0
compiler:
    - gcc
before_install: 
    - sudo apt-key adv --keyserver keyserver.ubuntu.com --recv E56151BF
    - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test
    - DISTRO=$(lsb_release -is | tr '[:upper:]' '[:lower:]')
    - CODENAME=$(lsb_release -cs)
    - echo "deb http://repos.mesosphere.io/${DISTRO} ${CODENAME} main" | sudo tee /etc/apt/sources.list.d/mesosphere.list
    - sudo apt-get -y update	
    - sudo apt-get -y install mesos g++-4.8
    - export CXX="g++-4.8" CC="gcc-4.8"
    - export LIBPROCESS_IP=127.0.1.1
    - sudo service mesos-master start
    - sudo service mesos-slave start
    - wget http://protobuf.googlecode.com/files/protobuf-2.5.0.tar.gz
    - tar xzvf protobuf-2.5.0.tar.gz
    - cd protobuf-2.5.0
    - ./configure
    - make
    - make check
    - sudo make install
    - cd ..
    - ./rebar get-deps
